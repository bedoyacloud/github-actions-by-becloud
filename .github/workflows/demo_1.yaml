name: Job Outputs Demo with Debugging

on: [push]

jobs:
  # JOB 1: Produce outputs
  job1:
    runs-on: ubuntu-latest
    outputs:
      output1: ${{ steps.step1.outputs.result }}
      version: ${{ steps.step1.outputs.app_version }}
      environment: ${{ steps.step1.outputs.deploy_env }}
    
    steps:
      - name: Generate outputs
        id: step1
        run: |
          # Creamos outputs a nivel de step
          echo "result=success" >> $GITHUB_OUTPUT
          echo "app_version=1.2.3" >> $GITHUB_OUTPUT
          echo "deploy_env=production" >> $GITHUB_OUTPUT
      
      # üîç AQU√ç INSPECCIONAMOS EL CONTENIDO
      - name: Debug - Show GITHUB_OUTPUT content
        run: |
          echo "=== Content of GITHUB_OUTPUT file ==="
          cat $GITHUB_OUTPUT
          echo "=== End of GITHUB_OUTPUT ==="
          echo ""
          echo "GITHUB_OUTPUT file location: $GITHUB_OUTPUT"
          ls -la $GITHUB_OUTPUT

  # JOB 2: Consume outputs (dependiente)
  job2:
    runs-on: ubuntu-latest
    needs: job1
    
    steps:
      # üîç TAMBI√âN PODEMOS VER LOS OUTPUTS RECIBIDOS
      - name: Debug - Show received outputs
        run: |
          echo "=== Outputs received from job1 ==="
          echo "output1: ${{ needs.job1.outputs.output1 }}"
          echo "version: ${{ needs.job1.outputs.version }}"
          echo "environment: ${{ needs.job1.outputs.environment }}"
          echo "=== End outputs ==="
      
      - name: Use outputs from job1
        run: |
          echo "Result: ${{ needs.job1.outputs.output1 }}"
          echo "Version: ${{ needs.job1.outputs.version }}"
          echo "Environment: ${{ needs.job1.outputs.environment }}"
